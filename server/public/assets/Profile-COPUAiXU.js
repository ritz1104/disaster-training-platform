import{u as S,r as b,e as C,j as e,N as k,b as u,z as o}from"./index-WRKZqFJu.js";import{u as p}from"./index.esm-CHuGv387.js";import{S as f}from"./shield-Chs3YES7.js";import{L as E}from"./lock-CRq0O1Bn.js";import{M as q}from"./mail-Dwmw0W6c.js";import{B as $}from"./building-E6-4-jOP.js";import{P as A}from"./phone-DtVpd4zN.js";const B=()=>{const{user:s,updateProfile:g}=S(),[n,h]=b.useState("profile"),[t,d]=b.useState(!1),{register:i,handleSubmit:y,formState:{errors:c},reset:x}=p({defaultValues:{name:(s==null?void 0:s.name)||"",organization:(s==null?void 0:s.organization)||"",phone:(s==null?void 0:s.phone)||""}}),{register:m,handleSubmit:j,formState:{errors:a},reset:w,watch:N}=p();C.useEffect(()=>{s&&x({name:s.name,organization:s.organization||"",phone:s.phone||""})},[s,x]);const v=async r=>{d(!0);try{const l=await g(r);l.success?o.success("Profile updated successfully!"):o.error(l.message)}catch{o.error("Failed to update profile")}finally{d(!1)}},P=async r=>{d(!0);try{o.success("Password changed successfully!"),w()}catch{o.error("Failed to change password")}finally{d(!1)}},z=[{id:"profile",name:"Profile Information",icon:u},{id:"security",name:"Security",icon:E}];return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-8",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(k,{size:"lg",showText:!1}),e.jsx("div",{className:"bg-blue-600 text-white p-4 rounded-full",children:e.jsx(u,{size:32})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-gray-600",children:s==null?void 0:s.email}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(f,{className:"mr-2 text-blue-600",size:16}),e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm",children:["NDMA ",s==null?void 0:s.role]})]})]})]})}),e.jsxs("div",{className:"grid lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-gray-50 border-b",children:e.jsx("h3",{className:"font-semibold text-gray-800",children:"Account Settings"})}),e.jsx("nav",{className:"p-2",children:z.map(r=>{const l=r.icon;return e.jsxs("button",{onClick:()=>h(r.id),className:`w-full flex items-center px-4 py-3 text-left rounded-lg transition-colors ${n===r.id?"bg-blue-50 text-blue-600 border-r-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(l,{className:"mr-3",size:20}),r.name]},r.id)})})]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[n==="profile"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Profile Information"}),e.jsxs("form",{onSubmit:y(v),autoComplete:"off",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",autoComplete:"off",...i("name",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters"}}),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.name?"border-red-500":"border-gray-300"}`})]}),c.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"email",value:(s==null?void 0:s.email)||"",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg bg-gray-50 cursor-not-allowed",disabled:!0})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Email cannot be changed. Contact administrator if needed."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Organization"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",autoComplete:"off",...i("organization"),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Your organization name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"tel",autoComplete:"off",...i("phone"),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Your phone number"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",value:(s==null?void 0:s.role)||"",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg bg-gray-50 cursor-not-allowed",disabled:!0})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Role is assigned by administrators and cannot be changed."})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:t,className:`w-full py-3 px-4 rounded-lg font-medium transition-colors ${t?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} text-white`,children:t?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Updating..."]}):"Update Profile"})})]})]}),n==="security"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Security Settings"}),e.jsxs("form",{onSubmit:j(P),autoComplete:"off",className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Change Password"}),e.jsx("p",{className:"text-blue-600 text-sm",children:"Ensure your password is strong and unique to keep your account secure."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password *"}),e.jsx("input",{type:"password",autoComplete:"off",...m("currentPassword",{required:"Current password is required"}),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a.currentPassword?"border-red-500":"border-gray-300"}`,placeholder:"Enter your current password"}),a.currentPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.currentPassword.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password *"}),e.jsx("input",{type:"password",autoComplete:"off",...m("newPassword",{required:"New password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a.newPassword?"border-red-500":"border-gray-300"}`,placeholder:"Enter new password"}),a.newPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.newPassword.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password *"}),e.jsx("input",{type:"password",autoComplete:"off",...m("confirmPassword",{required:"Please confirm your new password",validate:r=>r===N("newPassword")||"Passwords do not match"}),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${a.confirmPassword?"border-red-500":"border-gray-300"}`,placeholder:"Confirm new password"}),a.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.confirmPassword.message})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:t,className:`w-full py-3 px-4 rounded-lg font-medium transition-colors ${t?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} text-white`,children:t?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Changing Password..."]}):"Change Password"})})]})]})]})})]})]})};export{B as default};
