import{c as g,a as b,r as f,j as e,N as h,F as y,C as j,U as N,M as v,z as n,i as w}from"./index-WRKZqFJu.js";import{u as C}from"./index.esm-CHuGv387.js";import{u as L}from"./useMutation-xQinCMVx.js";import{B as q}from"./building-E6-4-jOP.js";import"./utils-D1gLOp5h.js";const m=g("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),D=()=>{const o=b(),[l,d]=f.useState(!1),{register:r,handleSubmit:u,formState:{errors:t},watch:k}=C(),i=L({mutationFn:s=>w.post("/trainings",s),onSuccess:s=>{n.success("Training created successfully!"),o(`/trainings/${s.data.data._id}`)},onError:s=>{var a,c;n.error(((c=(a=s.response)==null?void 0:a.data)==null?void 0:c.message)||"Failed to create training")}}),x=async s=>{d(!0);try{const a={...s,participants:parseInt(s.participants),location:{type:"Point",coordinates:[parseFloat(s.longitude),parseFloat(s.latitude)],name:s.locationName,address:s.locationAddress}};delete a.longitude,delete a.latitude,delete a.locationName,delete a.locationAddress,i.mutate(a)}catch{n.error("Failed to create training")}finally{d(!1)}},p=["Flood Management","Earthquake Safety","Cyclone Management","Fire Safety","Landslide Prevention","Drought Management","Tsunami Preparedness","Medical Emergency","Search and Rescue","Community Awareness"];return e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx(h,{size:"md",showText:!1}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Create NDMA Training"}),e.jsx("p",{className:"text-gray-600",children:"Set up a new disaster preparedness training program"})]})]})}),e.jsxs("form",{onSubmit:u(x),autoComplete:"off",className:"space-y-8",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Training Title *"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",autoComplete:"off",...r("title",{required:"Title is required",maxLength:{value:200,message:"Title must not exceed 200 characters"}}),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t.title?"border-red-500":"border-gray-300"}`,placeholder:"Enter training title"})]}),t.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme *"}),e.jsxs("select",{...r("theme",{required:"Theme is required"}),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t.theme?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select a theme"}),p.map(s=>e.jsx("option",{value:s,children:s},s))]}),t.theme&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.theme.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Institution *"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",autoComplete:"off",...r("institution",{required:"Institution is required"}),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t.institution?"border-red-500":"border-gray-300"}`,placeholder:"Enter organizing institution"})]}),t.institution&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.institution.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Training Date *"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"datetime-local",autoComplete:"off",...r("date",{required:"Date is required"}),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t.date?"border-red-500":"border-gray-300"}`})]}),t.date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.date.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Participants *"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"number",min:"1",max:"10000",autoComplete:"off",...r("participants",{required:"Number of participants is required",min:{value:1,message:"Must have at least 1 participant"},max:{value:1e4,message:"Cannot exceed 10000 participants"}}),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t.participants?"border-red-500":"border-gray-300"}`,placeholder:"Expected number of participants"})]}),t.participants&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.participants.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{autoComplete:"off",...r("description",{required:"Description is required",maxLength:{value:1e3,message:"Description must not exceed 1000 characters"}}),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t.description?"border-red-500":"border-gray-300"}`,rows:4,placeholder:"Describe the training objectives, agenda, and what participants will learn"}),t.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.description.message})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(v,{className:"mr-2",size:20}),"Location Information"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location Name"}),e.jsx("input",{type:"text",autoComplete:"off",...r("locationName"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Community Center, School Hall"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("input",{type:"text",autoComplete:"off",...r("locationAddress"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Full address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Longitude *"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"number",step:"any",autoComplete:"off",...r("longitude",{required:"Longitude is required",min:{value:-180,message:"Longitude must be between -180 and 180"},max:{value:180,message:"Longitude must be between -180 and 180"}}),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t.longitude?"border-red-500":"border-gray-300"}`,placeholder:"e.g., 77.2090"})]}),t.longitude&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.longitude.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Latitude *"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"number",step:"any",autoComplete:"off",...r("latitude",{required:"Latitude is required",min:{value:-90,message:"Latitude must be between -90 and 90"},max:{value:90,message:"Latitude must be between -90 and 90"}}),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${t.latitude?"border-red-500":"border-gray-300"}`,placeholder:"e.g., 28.6139"})]}),t.latitude&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.latitude.message})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>o("/trainings"),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l||i.isLoading,className:`px-6 py-3 rounded-lg font-medium transition-colors ${l||i.isLoading?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} text-white`,children:l||i.isLoading?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Creating..."]}):"Create Training"})]})]})]})})};export{D as default};
